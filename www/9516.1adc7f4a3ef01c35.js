"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9516],{9516:(B,c,l)=>{l.r(c),l.d(c,{AuthModule:()=>O});var g=l(9808),s=l(2382),f=l(520),m=l(7979),e=l(1223),_=l(8368),p=l(614);function v(n,o){1&n&&(e.TgZ(0,"div",16),e._uU(1," Email is required! "),e.qZA())}function Z(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function C(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"Password must be at least 6 characters"),e.qZA())}function h(n,o){if(1&n&&(e.TgZ(0,"div",16),e.YNc(1,Z,2,0,"div",1),e.YNc(2,C,2,0,"div",1),e.qZA()),2&n){e.oxw();const t=e.MAs(14);e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.minlength)}}function T(n,o){if(1&n&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" Login failed: ",t.errorMessage," ")}}function x(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.TgZ(2,"form",4,5),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.MAs(3),a=e.oxw();return i.form.valid&&a.onSubmit()}),e.TgZ(4,"div",6),e.TgZ(5,"label",7),e._uU(6,"Email"),e.qZA(),e.TgZ(7,"input",8,9),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().form.email=i}),e.qZA(),e.YNc(9,v,2,0,"div",10),e.qZA(),e.TgZ(10,"div",6),e.TgZ(11,"label",11),e._uU(12,"Password"),e.qZA(),e.TgZ(13,"input",12,13),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().form.password=i}),e.qZA(),e.YNc(15,h,3,2,"div",10),e.TgZ(16,"div",6),e.YNc(17,T,2,1,"div",10),e.qZA(),e.qZA(),e.TgZ(18,"div",6),e.TgZ(19,"button",14),e._uU(20," Login "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"button",15),e._uU(22," Create account "),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.MAs(3),r=e.MAs(8),i=e.MAs(14),a=e.oxw();e.xp6(7),e.Q6J("ngModel",a.form.email),e.xp6(2),e.Q6J("ngIf",r.errors&&t.submitted),e.xp6(4),e.Q6J("ngModel",a.form.password),e.xp6(2),e.Q6J("ngIf",i.errors&&t.submitted),e.xp6(2),e.Q6J("ngIf",t.submitted&&a.isLoginFailed)}}function A(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"Vous \xeates d\xe9j\xe0 connect\xe9 !"),e.qZA())}let M=(()=>{class n{constructor(t,r,i){this.authService=t,this.tokenService=r,this.router=i,this.form={email:null,password:null},this.isLoggedIn=this.tokenService.askToken(),this.isLoginFailed=!1,this.errorMessage=""}ngOnInit(){}onSubmit(){const{email:t,password:r}=this.form;this.authService.login(t,r).subscribe({next:i=>{this.tokenService.saveToken(i.access_token),this.router.navigate(["/accueil"])},error:i=>{this.isLoginFailed=!0,this.errorMessage=i.error.message}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.e),e.Y36(p.B),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:2,vars:2,consts:[["class","col-md-12",4,"ngIf"],[4,"ngIf"],[1,"col-md-12"],[1,"card","card-container",2,"width","auto","max-width","350px","margin","auto","padding","20px"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","email"],["type","text","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["class","alert alert-danger","role","alert",4,"ngIf"],["for","password"],["type","password","name","password","required","","minlength","5",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],[1,"btn","btn-primary","btn-block"],["routerLink","/auth/create","routerLinkActive","active",1,"btn","btn-primary","btn-block"],["role","alert",1,"alert","alert-danger"]],template:function(t,r){1&t&&(e.YNc(0,x,23,5,"div",0),e.YNc(1,A,2,0,"div",1)),2&t&&(e.Q6J("ngIf",!r.isLoggedIn),e.xp6(1),e.Q6J("ngIf",r.isLoggedIn))},directives:[g.O5,s._Y,s.JL,s.F,s.Fj,s.Q7,s.JJ,s.On,s.wO,m.rH,m.Od],styles:[".col-md-12[_ngcontent-%COMP%]{margin:10% auto}"]}),n})();const q=function(){return{margin:"2rem"}};let w=(()=>{class n{constructor(t){this.tokenService=t}ngOnInit(){this.tokenService.destroyToken()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.B))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-logout"]],decls:5,vars:2,consts:[[3,"ngStyle"],["routerLink","/home","routerLinkActive","active"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"p"),e._uU(2,"Vous \xeates d\xe9connect\xe9"),e.qZA(),e.TgZ(3,"a",1),e._uU(4,"Retour vers l'accueil"),e.qZA(),e.qZA()),2&t&&e.Q6J("ngStyle",e.DdM(1,q))},directives:[g.PC,m.yS,m.Od],styles:[""]}),n})();var b=l(5089);function J(n,o){1&n&&(e.TgZ(0,"div",27),e._uU(1," Name is required! "),e.qZA())}function y(n,o){1&n&&(e.TgZ(0,"div",27),e._uU(1," First name is required! "),e.qZA())}function N(n,o){1&n&&(e.TgZ(0,"div",27),e._uU(1," Email is required! "),e.qZA())}function I(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function L(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"Password must be at least 6 characters."),e.qZA())}function U(n,o){if(1&n&&(e.TgZ(0,"div",27),e.YNc(1,I,2,0,"div",28),e.YNc(2,L,2,0,"div",28),e.qZA()),2&n){e.oxw();const t=e.MAs(29);e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.minlength)}}function Q(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"Please confirm password"),e.qZA())}function S(n,o){if(1&n&&(e.TgZ(0,"div",27),e.YNc(1,Q,2,0,"div",28),e.qZA()),2&n){e.oxw();const t=e.MAs(35);e.xp6(1),e.Q6J("ngIf",t.errors.required)}}function Y(n,o){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.messageErreur)}}function F(n,o){if(1&n&&(e.TgZ(0,"div",27),e.YNc(1,Y,2,1,"div",28),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",""!==t.messageErreur)}}const E=[{path:"login",component:M},{path:"logout",component:w},{path:"create",component:(()=>{class n{constructor(t,r){this.userService=t,this.router=r,this.form={name:null,firstName:null,email:null,password:null,password1:null},this.messageErreur=""}ngOnInit(){}onSubmit(){const{name:t,firstName:r,email:i,password:a,password1:d}=this.form;this.userService.createUser(t,r,i,a,d).subscribe({next:u=>{this.router.navigate(["/auth/login"])},error:u=>this.messageErreur=u.error.message})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.K),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create"]],decls:44,vars:11,consts:[[1,"col-md-12"],[1,"card","card-container",2,"width","auto","max-width","350px","margin","auto","padding","20px"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","Name"],["type","text","id","Name","placeholder","Name","required","","name","name",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["class","alert alert-danger","role","alert",4,"ngIf"],["for","FirstName"],["type","text","id","FirstName","placeholder","First name","required","","name","firstName",1,"form-control",3,"ngModel","ngModelChange"],["firstName","ngModel"],[2,"display","flex","flex-direction","column","align-items","flex-start"],["for","exampleInputEmail1",2,"margin-bottom","0.1em"],[1,"form-text","text-muted"],["type","text","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","Enter email","name","email","required","","name","email",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["for","exampleInputPassword"],["type","password","id","exampleInputPassword","placeholder","Password","required","","minlength","5","name","password",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],["for","exampleInputPassword1"],["type","password","id","exampleInputPassword1","placeholder","Password","required","","minlength","5","name","password1",1,"form-control",3,"ngModel","ngModelChange"],["password1","ngModel"],[1,"form-group","form-check"],["type","checkbox","id","exampleCheck1",1,"form-check-input"],["for","exampleCheck1",1,"form-check-label"],["type","submit",1,"btn","btn-primary"],["role","alert",1,"alert","alert-danger"],[4,"ngIf"]],template:function(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"form",2,3),e.NdJ("ngSubmit",function(){return e.CHM(i),e.MAs(3).form.valid&&r.onSubmit()}),e.TgZ(4,"div",4),e.TgZ(5,"label",5),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"input",6,7),e.NdJ("ngModelChange",function(d){return r.form.name=d}),e.qZA(),e.YNc(9,J,2,0,"div",8),e.qZA(),e.TgZ(10,"div",4),e.TgZ(11,"label",9),e._uU(12,"First name"),e.qZA(),e.TgZ(13,"input",10,11),e.NdJ("ngModelChange",function(d){return r.form.firstName=d}),e.qZA(),e.YNc(15,y,2,0,"div",8),e.qZA(),e.TgZ(16,"div",4),e.TgZ(17,"div",12),e.TgZ(18,"label",13),e._uU(19,"Email address"),e.qZA(),e.TgZ(20,"small",14),e._uU(21,"We'll never share your email with anyone."),e.qZA(),e.qZA(),e.TgZ(22,"input",15,16),e.NdJ("ngModelChange",function(d){return r.form.email=d}),e.qZA(),e.YNc(24,N,2,0,"div",8),e.qZA(),e.TgZ(25,"div",4),e.TgZ(26,"label",17),e._uU(27,"Password"),e.qZA(),e.TgZ(28,"input",18,19),e.NdJ("ngModelChange",function(d){return r.form.password=d}),e.qZA(),e.YNc(30,U,3,2,"div",8),e.qZA(),e.TgZ(31,"div",4),e.TgZ(32,"label",20),e._uU(33,"Confirm password"),e.qZA(),e.TgZ(34,"input",21,22),e.NdJ("ngModelChange",function(d){return r.form.password1=d}),e.qZA(),e.YNc(36,S,2,1,"div",8),e.YNc(37,F,2,1,"div",8),e.qZA(),e.TgZ(38,"div",23),e._UZ(39,"input",24),e.TgZ(40,"label",25),e._uU(41,"I consent I didn't read the privacy policy."),e.qZA(),e.qZA(),e.TgZ(42,"button",26),e._uU(43,"Submit"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const i=e.MAs(3),a=e.MAs(8),d=e.MAs(14),u=e.MAs(23),k=e.MAs(29),j=e.MAs(35);e.xp6(7),e.Q6J("ngModel",r.form.name),e.xp6(2),e.Q6J("ngIf",a.errors&&i.submitted),e.xp6(4),e.Q6J("ngModel",r.form.firstName),e.xp6(2),e.Q6J("ngIf",d.errors&&i.submitted),e.xp6(7),e.Q6J("ngModel",r.form.email),e.xp6(2),e.Q6J("ngIf",u.errors&&i.submitted),e.xp6(4),e.Q6J("ngModel",r.form.password),e.xp6(2),e.Q6J("ngIf",k.errors&&i.submitted),e.xp6(4),e.Q6J("ngModel",r.form.password1),e.xp6(2),e.Q6J("ngIf",j.errors&&i.submitted),e.xp6(1),e.Q6J("ngIf",""!==r.messageErreur)}},directives:[s._Y,s.JL,s.F,s.Fj,s.Q7,s.JJ,s.On,g.O5,s.wO],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch}small[_ngcontent-%COMP%]{font-size:70%;margin:0}input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-width:30em}.col-md-12[_ngcontent-%COMP%]{margin:1em auto;flex:100%;max-width:100%}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:stretch;flex-wrap:wrap}"]}),n})()},{path:"**",redirectTo:"login",pathMatch:"full"}];let P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.Bz.forChild(E)],m.Bz]}),n})(),O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.ez,P,s.u5,f.JF]]}),n})()}}]);